<meta charset="UTF-8">
<!--Header JS-->
<script type="text/javascript" src="../../js/public/header.js" charset="utf-8"></script>
<!--Content Begin-->
<div class="container-fluid">
    <!-- Page Heading -->
    <h1 class="h3 mb-2 text-gray-800">Tables</h1>
    <p class="mb-4">DataTables is a third party plugin that is used to generate the demo table below. For more
        information about DataTables, please visit the <a target="_blank" href="https://datatables.net">official
            DataTables documentation</a>.</p>
    <!-- DataTales Example -->
    <div class="card shadow mb-4">
        <!--<div class="card-header py-3">-->
        <!--<h6 class="m-0 font-weight-bold text-primary">DataTables Example</h6>-->
        <!--</div>-->
        <div class="card-body">
            <div class="table-responsive">
                <table class="table table-bordered" id="dataTable" width="100%" cellspacing="0">
                    <thead>
                    <tr>
                        <th>编号</th>
                        <th>活动标题</th>
                        <th>开始日期</th>
                        <th>结束日期</th>
                        <th>占用场地</th>
                        <th>审核状态</th>
                        <th>操作</th>
                    </tr>
                    </thead>
                    <tbody>

                    </tbody>
                </table>
            </div>
        </div>
    </div>

</div>
<!--Content End-->
<!--Modal-->
<!--editmodal Modal-->
<div class="modal fade" id="editModal" tabindex="-1" role="dialog" aria-labelledby="e_title" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="e_title">修改申请表</h5>
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            </div>
            <div class="modal-body">
                <form class="form-horizontal" id="modal_edit">
                    <!--title-->
                    <div class="form-group">
                        <label for="id" class="col-sm-2 control-label">ID</label>
                        <div class="col-sm-10">
                            <input type="text" class="form-control" name="id" placeholder="">
                        </div>
                    </div>
                    <!--content-->
                    <div class="form-group">
                        <label for="attendance" class="col-sm-2 control-label">参与人数</label>
                        <div class="col-sm-10">
                            <input type="email" class="form-control" name="attendance" placeholder="输入人数">
                        </div>
                    </div>
                    <!--content-->
                    <div class="form-group">
                        <label for="starttime" class="col-sm-2 control-label">开始日期</label>
                        <div class="col-sm-10">
                            <input type="email" class="form-control" id="starttime" placeholder="xxxx-xx-xx">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="endtime" class="col-sm-2 control-label">结束日期</label>
                        <div class="col-sm-10">
                            <input type="email" class="form-control" id="endtime" placeholder="xxxx-xx-xx">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="actdesc" class="col-sm-2 control-label">活动描述</label>
                        <div class="col-sm-10">
                            <textarea type="text" class="form-control" id="actdesc" rows="3"></textarea>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary">发送</button>
                <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal -->
</div>
<!--Modal End-->

<!--Footer JS-->
<script src="../../js/private/jquery.min.js"></script>
<script src="../../js/private/bootstrap.bundle.min.js"></script>
<script src="../../js/private/jquery.easing.min.js"></script>
<script src="../../js/private/sb-admin-2.min.js"></script>
<script src="../../js/private/jquery.dataTables.min.js"></script>
<script src="../../js/private/dataTables.bootstrap4.min.js"></script>
<script src="../../js/private/datatables-demo.js"></script>
<script src="../../js/private/common.js"></script>
<script src="../../js/private/bootstrap.min.js"></script>
<!--<script type="text/javascript" src="../../js/public/footer.js" charset="utf-8"></script>-->
<script type="text/javascript">
    $(function () {
        $.ajax({
            url: baseUrl + 'cams/app/getAllFormByUser',
            type: 'get',
            dataType: 'json',
            success: function (data) {
                //获取数据集
                var trs = $("#dataTable").find("tr");
                //取出第一行
                var th = trs[0];
                //判断数据集是否有值
                if (trs.length > 1) {
                    //先去除模板空行,再加入表头；
                    $("#dataTable").empty().append(th);
                }
                //动态生成表格
                for (i in data) {
                    var tr;
                    tr =
                        '<td data-tag="id">' + data[i].formId + '</td>' +
                        '<td data-tag="title">' + data[i].appTitle + '</td>' +
                        '<td data-tag="starttime">' + data[i].startTime + '</td>' +
                        '<td>' + data[i].endTime + '</td>' +
                        '<td>' + data[i].placeName + '</td>' +
                        '<td>' + data[i].verifyStatus + '</td>' +
                        '<td>' + '<button type="button" onclick="editForm(this)" class="btn btn-primary " data-toggle="modal" data-target="#editModal">审核</button>' + '</td>'
                    $("#dataTable").append('<tr>' + tr + '</tr>')
                }
            }
        })
    })

    function editForm(btn) {
        $("#editModal").modal('show');
        //找父节点
        var currnet_row = $(btn).parents('tr');
        //定义数组
        var application = {};

        application.id = currnet_row.find("td[data-tag='id']").html();
        application.title = currnet_row.find("td[data-tag='title']").html();
        application.title = currnet_row.find("td[data-tag='title']").html();

        var form_obj = $("#modal_edit");
        $.each(application, function (key, val) {
            $(form_obj).find("input[name='" + key + "']").val(val);
        });
    }
</script>
<!--Script Code Or FIle End-->
<script type="text/javascript" src="../../js/public/bottom.js" charset="utf-8"></script>